(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9033],{5162:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(7294),r=a(6010);const l="tabItem_Ymn6";function o(e){let{children:t,hidden:a,className:o}=e;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(l,o),hidden:a},t)}},4866:(e,t,a)=>{"use strict";a.d(t,{Z:()=>w});var n=a(7462),r=a(7294),l=a(6010),o=a(2466),u=a(6775),i=a(1980),s=a(7392),d=a(12);function p(e){return function(e){return r.Children.map(e,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))}(e).map((e=>{let{props:{value:t,label:a,attributes:n,default:r}}=e;return{value:t,label:a,attributes:n,default:r}}))}function m(e){const{values:t,children:a}=e;return(0,r.useMemo)((()=>{const e=t??p(a);return function(e){const t=(0,s.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function c(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function g(e){let{queryString:t=!1,groupId:a}=e;const n=(0,u.k6)(),l=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,i._X)(l),(0,r.useCallback)((e=>{if(!l)return;const t=new URLSearchParams(n.location.search);t.set(l,e),n.replace({...n.location,search:t.toString()})}),[l,n])]}function h(e){const{defaultValue:t,queryString:a=!1,groupId:n}=e,l=m(e),[o,u]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!c({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const n=a.find((e=>e.default))??a[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:l}))),[i,s]=g({queryString:a,groupId:n}),[p,h]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[n,l]=(0,d.Nk)(a);return[n,(0,r.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:n}),k=(()=>{const e=i??p;return c({value:e,tabValues:l})?e:null})();(0,r.useLayoutEffect)((()=>{k&&u(k)}),[k]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!c({value:e,tabValues:l}))throw new Error(`Can't select invalid tab value=${e}`);u(e),s(e),h(e)}),[s,h,l]),tabValues:l}}var k=a(2389);const b="tabList__CuJ",f="tabItem_LNqP";function v(e){let{className:t,block:a,selectedValue:u,selectValue:i,tabValues:s}=e;const d=[],{blockElementScrollPositionUntilNextRender:p}=(0,o.o5)(),m=e=>{const t=e.currentTarget,a=d.indexOf(t),n=s[a].value;n!==u&&(p(t),i(n))},c=e=>{var t;let a=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{const t=d.indexOf(e.currentTarget)+1;a=d[t]??d[0];break}case"ArrowLeft":{const t=d.indexOf(e.currentTarget)-1;a=d[t]??d[d.length-1];break}}null==(t=a)||t.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":a},t)},s.map((e=>{let{value:t,label:a,attributes:o}=e;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:u===t?0:-1,"aria-selected":u===t,key:t,ref:e=>d.push(e),onKeyDown:c,onClick:m},o,{className:(0,l.Z)("tabs__item",f,null==o?void 0:o.className,{"tabs__item--active":u===t})}),a??t)})))}function N(e){let{lazy:t,children:a,selectedValue:n}=e;if(a=Array.isArray(a)?a:[a],t){const e=a.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},a.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n}))))}function y(e){const t=h(e);return r.createElement("div",{className:(0,l.Z)("tabs-container",b)},r.createElement(v,(0,n.Z)({},e,t)),r.createElement(N,(0,n.Z)({},e,t)))}function w(e){const t=(0,k.Z)();return r.createElement(y,(0,n.Z)({key:String(t)},e))}},8282:(e,t,a)=>{"use strict";a.d(t,{Z:()=>o});var n=a(7294),r=a(7623),l=a(2949);const o=e=>{let{chart:t}=e;const a=(0,n.useRef)(null),[o]=(0,n.useState)("mermaid-"+Math.random().toString(36).slice(4)),{colorMode:u}=(0,l.I)();return(0,n.useEffect)((()=>{r.Z.mermaidAPI.initialize({startOnLoad:!0,securityLevel:"loose",logLevel:5})})),(0,n.useEffect)((()=>{a.current&&""!==t&&r.Z.mermaidAPI.render(o,`%%{init: {'theme':'${"dark"===u?"dark":"neutral"}'}}%%`+t,(e=>{a.current.innerHTML=e}))}),[t,u]),n.createElement("div",{key:o,ref:a})}},1413:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var n=a(7294),r=a(5864);const l=e=>{let{url:t,language:a="js",showLineNumbers:l,title:o,className:u,metastring:i}=e;const[s,d]=(0,n.useState)("Loading...");return(0,n.useEffect)((()=>{fetch(t).then((e=>e.text())).then((e=>d(e))).catch((e=>d(e)))}),[]),n.createElement(r.Z,{children:s,showLineNumbers:l,title:o,className:u,metastring:i,language:a})}},8907:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>m,contentTitle:()=>d,default:()=>k,frontMatter:()=>s,metadata:()=>p,toc:()=>g});var n=a(7462),r=(a(7294),a(3905)),l=a(4866),o=a(5162),u=a(1413),i=a(8282);const s={},d="\ud83c\udfde Media group",p={unversionedId:"plugins/media-group",id:"plugins/media-group",title:"\ud83c\udfde Media group",description:"Telegram media groups is not one update, it's separated messages with field mediagroupid.",source:"@site/docs/plugins/media-group.mdx",sourceDirName:"plugins",slug:"/plugins/media-group",permalink:"/docs/plugins/media-group",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/plugins/media-group.mdx",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udce6 Arguments",permalink:"/docs/plugins/arguments"},next:{title:"\ud83d\udcbe Sessions",permalink:"/docs/plugins/sessions"}},m={},c="https://raw.githubusercontent.com/OpengramJS/media-group/master",g=[{value:"Installing a plugin",id:"installing-a-plugin",level:2},{value:"How to use",id:"how-to-use",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Result object",id:"result-object",level:3},{value:"Usage example",id:"usage-example",level:2},{value:"Additional Information",id:"additional-information",level:2}],h={toc:g};function k(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},h,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"-media-group"},"\ud83c\udfde Media group"),(0,r.kt)("p",null,"Telegram media groups is not one update, it's separated messages with field ",(0,r.kt)("inlineCode",{parentName:"p"},"media_group_id"),".\nThis makes it difficult to work with them, since you need to get all these messages in order to process the media group.\nThis plugin allows you to easily handle and copy media groups."),(0,r.kt)("p",null,"The plugin works with ",(0,r.kt)("strong",{parentName:"p"},"video"),", ",(0,r.kt)("strong",{parentName:"p"},"audio"),", ",(0,r.kt)("strong",{parentName:"p"},"photo"),", ",(0,r.kt)("strong",{parentName:"p"},"document")," and their combinations."),(0,r.kt)("h2",{id:"installing-a-plugin"},"Installing a plugin"),(0,r.kt)(l.Z,{defaultValue:"npm",values:[{label:"NPM",value:"npm"},{label:"Yarn",value:"yarn"},{label:"pnpm",value:"pnpm"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"npm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm install @opengram/media-group\n"))),(0,r.kt)(o.Z,{value:"yarn",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add @opengram/media-group\n"))),(0,r.kt)(o.Z,{value:"pnpm",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add @opengram/media-group\n")))),(0,r.kt)("h2",{id:"how-to-use"},"How to use"),(0,r.kt)("h3",{id:"configuration"},"Configuration"),(0,r.kt)("p",null,"Accepted fields:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"),(0,r.kt)("th",{parentName:"tr",align:null},"Required"),(0,r.kt)("th",{parentName:"tr",align:null},"Default value"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"timeout")),(0,r.kt)("td",{parentName:"tr",align:null},"Timeout after which the media group is considered processed"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"100"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"store")),(0,r.kt)("td",{parentName:"tr",align:null},"Map-compatible store used for temporary storing media group messages"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("a",{parentName:"td",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map"},"Map"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"allowedUpdates")),(0,r.kt)("td",{parentName:"tr",align:null},"List of allowed updates"),(0,r.kt)("td",{parentName:"tr",align:null},"No"),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"['video', 'audio', 'photo', 'document']"))))),(0,r.kt)("h3",{id:"result-object"},"Result object"),(0,r.kt)("p",null,"You can get plugin result in ",(0,r.kt)("inlineCode",{parentName:"p"},"ctx.mediaGroup"),", that object contains media group messages array."),(0,r.kt)("h2",{id:"usage-example"},"Usage example"),(0,r.kt)(l.Z,{defaultValue:"basic",values:[{label:"Basic",value:"basic"},{label:"With external store",value:"store"}],mdxType:"Tabs"},(0,r.kt)(o.Z,{value:"basic",mdxType:"TabItem"},(0,r.kt)(u.Z,{url:c+"/examples/basic.js",showLineNumbers:!0,mdxType:"GithubBlock"})),(0,r.kt)(o.Z,{value:"store",mdxType:"TabItem"},(0,r.kt)(u.Z,{url:c+"/examples/external-store.js",showLineNumbers:!0,mdxType:"GithubBlock"}))),(0,r.kt)("h1",{id:"flowchart"},"Flowchart"),(0,r.kt)("details",null,(0,r.kt)("summary",null,"Click to expand"),(0,r.kt)("center",null,(0,r.kt)(i.Z,{chart:'\n flowchart TB\n  U("Incoming update") --\x3e M("Upstream middlewares")\n  M --\x3e F("Filter by given update types")\n  F --\x3e E("Has media group?")\n  E -- No --\x3e N("Nothing to do, run next")\n  E -- Yes --\x3e STSAV\n  MGLEN --\x3e TO("Wait for <code>timeout</code>")\n  TO --\x3e TOE("Timeout expired") --\x3e ACTX\n  HV --\x3e U\n  ACTX("Add media-group messages\nto <code>ctx.mediaGroup</code> and mark as <code>media_group</code>, run next") --\x3e DM("Downstream middlewares")\n  HV("Wait for new media")\n  STSAV("Save to store") --\x3e MGLEN("Saved messages count = 10?")\n  MGLEN -- No --\x3e HV\n  MGLEN -- Yes --\x3e ACTX\n',mdxType:"Mermaid"}))),(0,r.kt)("h2",{id:"additional-information"},"Additional Information"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Source:")," ",(0,r.kt)("a",{parentName:"li",href:"https://github.com/OpengramJS/media-group"},"https://github.com/OpengramJS/media-group")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"NPM:")," ",(0,r.kt)("a",{parentName:"li",href:"https://www.npmjs.com/package/@opengram/media-group"},"https://www.npmjs.com/package/@opengram/media-group")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Replit:")," ",(0,r.kt)("a",{parentName:"li",href:"https://replit.com/team/Opengram"},"https://replit.com/team/Opengram"))))}k.isMDXComponent=!0},1748:(e,t,a)=>{var n={"./locale":9234,"./locale.js":9234};function r(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=1748}}]);